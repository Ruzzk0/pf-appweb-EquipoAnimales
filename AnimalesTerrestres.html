<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarjetas con Comentarios</title>
    <style>
        /* Estilo para el modal */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgb(0,0,0);
            background-color: rgba(0,0,0,0.4); 
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; 
            padding: 20px;
            border: 1px solid #888;
            width: 80%; 
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .hidden {
            display: none;
        }

        /* Estilo de la tarjeta */
        .card {
            border: 1px solid #ccc;
            margin: 10px;
            padding: 10px;
            border-radius: 5px;
        }

        .comment-item {
            border: 1px solid #ddd;
            padding: 5px;
            margin: 5px 0;
            border-radius: 3px;
        }
    </style>
</head>
<body>

<div class="card">
    <h2>Nombre del Animal</h2>
    <button class="comment-btn">Comentar</button>
    <p class="comment-count">0 comentarios</p>
    <div class="comments-section">
        <div class="comments-list"></div>
    </div>
    <button class="delete-btn">Eliminar Tarjeta</button>
    <button class="edit-btn">Editar Tarjeta</button>
</div>

<!-- Modal para el comentario -->
<div id="commentModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Agregar Comentario</h2>
        <textarea id="commentText" placeholder="Escribe tu comentario aquí..."></textarea>
        <button id="submitComment">Enviar Comentario</button>
    </div>
</div>

<script>
    // Espera a que el DOM esté completamente cargado
    document.addEventListener("DOMContentLoaded", function () {
        const card = document.querySelector('.card');
        const modal = document.getElementById('commentModal');
        const commentText = document.getElementById('commentText');
        const commentBtn = card.querySelector('.comment-btn');
        const commentsList = card.querySelector('.comments-list');
        const commentCount = card.querySelector('.comment-count');
        const deleteBtn = card.querySelector('.delete-btn');
        const editBtn = card.querySelector('.edit-btn');

        // Muestra el modal al hacer clic en el botón de comentar
        commentBtn.addEventListener('click', () => {
            modal.style.display = "block"; // Muestra el modal
        });

        // Cerrar el modal al hacer clic en la "X"
        document.querySelector('.close').addEventListener('click', () => {
            modal.style.display = "none";
        });

        // Cerrar el modal si se hace clic fuera de él
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        });

        // Maneja el evento de envío de comentario
        document.getElementById('submitComment').addEventListener('click', (e) => {
            e.preventDefault();
            const comment = commentText.value.trim();

            if (comment !== '') {
                // Crea un nuevo elemento de comentario
                const commentItem = document.createElement('div');
                commentItem.classList.add('comment-item');
                commentItem.textContent = comment;

                // Agrega el nuevo comentario a la lista de comentarios
                commentsList.appendChild(commentItem);

                // Actualiza el contador de comentarios
                const currentCount = parseInt(commentCount.textContent) || 0;
                commentCount.textContent = `${currentCount + 1} comentarios`;

                // Limpia el textarea y cierra el modal
                commentText.value = '';
                modal.style.display = "none";
            } else {
                alert('Por favor, escribe un comentario antes de enviar.');
            }
        });

        // Maneja el evento de eliminación de tarjetas
        deleteBtn.addEventListener('click', () => {
            if (confirm('¿Estás seguro de que deseas eliminar esta tarjeta?')) {
                card.remove();
            }
        });

        // Maneja el evento de edición de tarjetas (sin funcionalidad aún)
        editBtn.addEventListener('click', () => {
            alert('Funcionalidad de edición no implementada.');
        });
    });
</script>

</body>
</html>
